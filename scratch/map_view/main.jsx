var articles = {
	"Austria": [
		{ "title": "Lorem ipsum dolor sit amet, consectetuer adipiscing elit.", "blurb": "Ut erat augue, porttitor a consectetur ac, pulvinar sed augue. Morbi vestibulum eget erat sit amet scelerisque. Fusce semper enim in magna porttitor commodo. Maecenas justo nisl, fringilla aliquet ornare nec, ultrices sollicitudin ante. Proin id mauris eget tellus maximus dignissim id ac justo. Sed accumsan felis vestibulum laoreet volutpat. Vivamus tempor leo sit amet sem interdum accumsan. Curabitur quis interdum nunc.", "link": "/views/article.html" },
		{ "title": "Aliquam tincidunt mauris eu risus.", "blurb": "Morbi laoreet urna vel blandit bibendum. Vestibulum ultricies non lacus vitae fermentum. Nunc libero enim, gravida nec ullamcorper eu, feugiat ac nisl. Suspendisse bibendum dignissim quam in vulputate. Morbi nulla arcu, viverra sed laoreet pellentesque, efficitur id lectus. Cras mattis purus enim, sagittis volutpat eros sagittis ac. Sed nulla velit, scelerisque id euismod quis, pulvinar vitae nisl. Donec nulla leo, tincidunt at gravida a, tristique a lorem. Etiam non odio lectus. Morbi at viverra eros, ut imperdiet tellus. Etiam lacinia nibh risus, quis mattis turpis vehicula ut. Vestibulum euismod lacus id placerat tincidunt.", "link": "/views/article.html" },
		{ "title": "Vestibulum auctor dapibus neque.", "blurb": "Phasellus faucibus, mauris vel hendrerit vulputate, nisi erat convallis nisi, ac semper mauris massa vitae quam. Sed non sem condimentum, pellentesque turpis non, pharetra mi. Aliquam sed odio orci. Vestibulum semper nisl orci, at eleifend odio iaculis finibus. Quisque bibendum lacus vel mauris bibendum ultrices. Pellentesque fermentum nunc id augue interdum, id pretium nisi ultricies. Donec vehicula semper est. Pellentesque diam risus, aliquam ut maximus id, ornare id eros. Cras pulvinar ultrices lectus, ut consequat eros lacinia id. Integer dignissim lectus neque, non venenatis urna porta et. Nam ut tellus pellentesque, congue metus at, egestas est. Nunc vestibulum congue efficitur. Donec euismod imperdiet risus vel tristique. Maecenas sed viverra tellus. Nullam mattis sapien ac pellentesque dignissim. Nam et pretium leo, sit amet molestie arcu.", "link": "/views/article.html" },
		{ "title": "Nunc dignissim risus id metus.", "blurb": "Sed placerat eget dui eget egestas. Phasellus luctus ex a tempus ultrices. Curabitur pulvinar massa ut felis aliquam, ac aliquam diam rhoncus. Aenean in venenatis ligula. Morbi eu ullamcorper felis. Nam efficitur, elit ac sodales sollicitudin, dui eros finibus lectus, vitae dapibus nisi ipsum vitae massa. Vestibulum a massa at sapien eleifend laoreet ac at elit. Donec et leo lobortis, pretium dolor et, volutpat ex.", "link": "/views/article.html" },
		{ "title": "Cras ornare tristique elit.", "link": "/views/article.html"},
		{ "title": "Vivamus vestibulum nulla nec ante.", "link": "/views/article.html"},
		{ "title": "Praesent placerat risus quis eros.", "blurb": "Sed placerat eget dui eget egestas. Phasellus luctus ex a tempus ultrices. Curabitur pulvinar massa ut felis aliquam, ac aliquam diam rhoncus. Aenean in venenatis ligula. Morbi eu ullamcorper felis. Nam efficitur, elit ac sodales sollicitudin, dui eros finibus lectus, vitae dapibus nisi ipsum vitae massa. Vestibulum a massa at sapien eleifend laoreet ac at elit. Donec et leo lobortis, pretium dolor et, volutpat ex.", "link": "/views/article.html"},
		{ "title": "Nunc ut augue sollicitudin, commodo tellus sodales, gravida dolor.", "link": "/views/article.html"},
		{ "title": "Suspendisse egestas arcu vel enim sodales, nec porta eros elementum.", "link": "/views/article.html"},
		{ "title": "Etiam tempor metus eu interdum eleifend.", "link": "/views/article.html"},
		{ "title": "Nam vitae augue hendrerit eros congue feugiat et eu lacus.", "link": "/views/article.html"},
		{ "title": "Maecenas non massa finibus, maximus augue ut, hendrerit velit.", "link": "/views/article.html"},
		{ "title": "Aenean condimentum ante et erat tincidunt molestie.", "link": "/views/article.html"},
		{ "title": "Mauris ultrices tortor at pulvinar tristique.", "blurb": "Ut erat augue, porttitor a consectetur ac, pulvinar sed augue. Morbi vestibulum eget erat sit amet scelerisque. Fusce semper enim in magna porttitor commodo. Maecenas justo nisl, fringilla aliquet ornare nec, ultrices sollicitudin ante. Proin id mauris eget tellus maximus dignissim id ac justo. Sed accumsan felis vestibulum laoreet volutpat. Vivamus tempor leo sit amet sem interdum accumsan. Curabitur quis interdum nunc.", "link": "/views/article.html"},
		{ "title": "Fusce venenatis dui non felis pharetra pellentesque.", "link": "/views/article.html"},
		{ "title": "Sed in neque condimentum erat tincidunt accumsan consequat tempus elit.", "link": "/views/article.html"},
		{ "title": "Vestibulum eu ligula porta mauris vehicula efficitur.", "link": "/views/article.html"},
		{ "title": "Mauris congue risus dignissim lacus porta, sit amet lobortis tortor ultrices.", "link": "/views/article.html"},
		{ "title": "Integer eget orci quis purus interdum porta.", "blurb": "Morbi laoreet urna vel blandit bibendum. Vestibulum ultricies non lacus vitae fermentum. Nunc libero enim, gravida nec ullamcorper eu, feugiat ac nisl. Suspendisse bibendum dignissim quam in vulputate. Morbi nulla arcu, viverra sed laoreet pellentesque, efficitur id lectus. Cras mattis purus enim, sagittis volutpat eros sagittis ac. Sed nulla velit, scelerisque id euismod quis, pulvinar vitae nisl. Donec nulla leo, tincidunt at gravida a, tristique a lorem. Etiam non odio lectus. Morbi at viverra eros, ut imperdiet tellus. Etiam lacinia nibh risus, quis mattis turpis vehicula ut. Vestibulum euismod lacus id placerat tincidunt.", "link": "/views/article.html"},
		{ "title": "In maximus magna ut feugiat porta.", "link": "/views/article.html"},
		{ "title": "Vestibulum ac est accumsan, pharetra augue et, elementum turpis.", "link": "/views/article.html"},
		{ "title": "Curabitur quis lacus et massa consequat molestie vel nec velit.", "link": "/views/article.html"},
		{ "title": "Duis ultricies dolor a ex dictum suscipit.", "link": "/views/article.html"},
		{ "title": "Sed condimentum est efficitur metus dignissim, id dictum purus fermentum.", "link": "/views/article.html"},
		{ "title": "Duis imperdiet elit ac arcu varius, non volutpat massa vestibulum.", "blurb": "Ut erat augue, porttitor a consectetur ac, pulvinar sed augue. Morbi vestibulum eget erat sit amet scelerisque. Fusce semper enim in magna porttitor commodo. Maecenas justo nisl, fringilla aliquet ornare nec, ultrices sollicitudin ante. Proin id mauris eget tellus maximus dignissim id ac justo. Sed accumsan felis vestibulum laoreet volutpat. Vivamus tempor leo sit amet sem interdum accumsan. Curabitur quis interdum nunc.", "link": "/views/article.html"},
		{ "title": "Morbi pellentesque ex in velit lacinia euismod.", "link": "/views/article.html"},
		{ "title": "Fusce elementum sapien sit amet nisi feugiat, ac viverra nunc ornare.", "link": "/views/article.html"},
		{ "title": "Donec vitae quam id quam commodo sodales.", "link": "/views/article.html"},
		{ "title": "Integer in neque condimentum, placerat ex non, laoreet risus.", "link": "/views/article.html"},
		{ "title": "Maecenas consequat augue non condimentum consectetur.", "blurb": "Morbi laoreet urna vel blandit bibendum. Vestibulum ultricies non lacus vitae fermentum. Nunc libero enim, gravida nec ullamcorper eu, feugiat ac nisl. Suspendisse bibendum dignissim quam in vulputate. Morbi nulla arcu, viverra sed laoreet pellentesque, efficitur id lectus. Cras mattis purus enim, sagittis volutpat eros sagittis ac. Sed nulla velit, scelerisque id euismod quis, pulvinar vitae nisl. Donec nulla leo, tincidunt at gravida a, tristique a lorem. Etiam non odio lectus. Morbi at viverra eros, ut imperdiet tellus. Etiam lacinia nibh risus, quis mattis turpis vehicula ut. Vestibulum euismod lacus id placerat tincidunt.", "link": "/views/article.html"},
		{ "title": "Fusce pellentesque suscipit nibh.", "link": "/views/article.html"}
	],
	"Hungary": [
		{ "title": "Lorem ipsum dolor sit amet, consectetuer adipiscing elit.", "link": "/views/article.html"},
		{ "title": "Aliquam tincidunt mauris eu risus.", "blurb": "Ut erat augue, porttitor a consectetur ac, pulvinar sed augue. Morbi vestibulum eget erat sit amet scelerisque. Fusce semper enim in magna porttitor commodo. Maecenas justo nisl, fringilla aliquet ornare nec, ultrices sollicitudin ante. Proin id mauris eget tellus maximus dignissim id ac justo. Sed accumsan felis vestibulum laoreet volutpat. Vivamus tempor leo sit amet sem interdum accumsan. Curabitur quis interdum nunc.", "link": "/views/article.html" },
		{ "title": "Vestibulum auctor dapibus neque.", "blurb": "Morbi laoreet urna vel blandit bibendum. Vestibulum ultricies non lacus vitae fermentum. Nunc libero enim, gravida nec ullamcorper eu, feugiat ac nisl. Suspendisse bibendum dignissim quam in vulputate. Morbi nulla arcu, viverra sed laoreet pellentesque, efficitur id lectus. Cras mattis purus enim, sagittis volutpat eros sagittis ac. Sed nulla velit, scelerisque id euismod quis, pulvinar vitae nisl. Donec nulla leo, tincidunt at gravida a, tristique a lorem. Etiam non odio lectus. Morbi at viverra eros, ut imperdiet tellus. Etiam lacinia nibh risus, quis mattis turpis vehicula ut. Vestibulum euismod lacus id placerat tincidunt.", "link": "/views/article.html"},
		{ "title": "Nunc dignissim risus id metus.", "link": "/views/article.html"}
	],
	"United States": [
		{ "title": "Duis imperdiet elit ac arcu varius, non volutpat massa vestibulum.", "blurb": "Ut erat augue, porttitor a consectetur ac, pulvinar sed augue. Morbi vestibulum eget erat sit amet scelerisque. Fusce semper enim in magna porttitor commodo. Maecenas justo nisl, fringilla aliquet ornare nec, ultrices sollicitudin ante. Proin id mauris eget tellus maximus dignissim id ac justo. Sed accumsan felis vestibulum laoreet volutpat. Vivamus tempor leo sit amet sem interdum accumsan. Curabitur quis interdum nunc.", "link": "/views/article.html"},
		{ "title": "Morbi pellentesque ex in velit lacinia euismod.", "link": "/views/article.html"},
		{ "title": "Fusce elementum sapien sit amet nisi feugiat, ac viverra nunc ornare.", "link": "/views/article.html"},
		{ "title": "Donec vitae quam id quam commodo sodales.", "link": "/views/article.html"},
		{ "title": "Integer in neque condimentum, placerat ex non, laoreet risus.", "link": "/views/article.html"},
		{ "title": "Maecenas consequat augue non condimentum consectetur.", "blurb": "Morbi laoreet urna vel blandit bibendum. Vestibulum ultricies non lacus vitae fermentum. Nunc libero enim, gravida nec ullamcorper eu, feugiat ac nisl. Suspendisse bibendum dignissim quam in vulputate. Morbi nulla arcu, viverra sed laoreet pellentesque, efficitur id lectus. Cras mattis purus enim, sagittis volutpat eros sagittis ac. Sed nulla velit, scelerisque id euismod quis, pulvinar vitae nisl. Donec nulla leo, tincidunt at gravida a, tristique a lorem. Etiam non odio lectus. Morbi at viverra eros, ut imperdiet tellus. Etiam lacinia nibh risus, quis mattis turpis vehicula ut. Vestibulum euismod lacus id placerat tincidunt.", "link": "/views/article.html"},
		{ "title": "Fusce pellentesque suscipit nibh.", "link": "/views/article.html"}
	]
};


var Header = React.createClass({
	render: function() {
		return (
			<header className="row page-header">
				<a href="/views/main.html" style={{color: "black"}}>
					<h1 className="col-xs-12 text-center">Siddhartha Banerjee <small><em><b>travelogue</b></em></small></h1>
				</a>
			</header>
		);
	}
});

var ArticleLink = React.createClass({
	render: function() {
		return (
			<span>
			<p className="article-title"><b><a href={this.props.article.link}>{this.props.article.title}</a></b></p>
			<p>{ (!!this.props.article.blurb) ? this.props.article.blurb : "" }</p>
			</span>
		);
	}
});

var CountryList = React.createClass({
	getCountryId: function() {
		return this.props.country.toLowerCase().replace(/\s+/, "-");
	},

	getInitialState: function() {
		return { backgroundImage: "url('/public/images/" + this.getCountryId() + ".JPG')" };
	},

	componentDidMount: function() {
		// This is a hack for making skrollr work with React. References:
		// Issue: https://github.com/facebook/react/issues/2329
		// Hack: http://stackoverflow.com/questions/21648347/true-custom-attributes-e-g-microdata-in-react
		this.refs.countryNameHeader.getDOMNode().setAttribute("data--100-bottom", "opacity: 1");
		this.refs.articleListCurtain.getDOMNode().setAttribute("data-200-top", "opacity: 0");
	},

	render: function() {
		var sectionId = this.getCountryId();
		return (
			<section id={sectionId} className="country-section">
				<div className="country-name">
					<h3 className="text-center" data-bottom="opacity: 0" data-anchor-target={"#" + sectionId + " .country-name"} ref="countryNameHeader">{this.props.country}</h3>
				</div>
				<div style={{ backgroundImage: this.state.backgroundImage }} className="bcg" data-bottom-top="background-position: 50% 40%" data-top-bottom="background-position: 50% 60%" data-anchor-target={"#" + sectionId + " .country-article-list"}>
					<div className="curtain" data-top="opacity: 1" data-anchor-target={"#" + sectionId + " .country-name"} ref="articleListCurtain">
						<div className="country-article-list col-xs-12 col-sm-offset-2 col-sm-8">
							<ul className="list-group">
								{this.props.articles.map(function(article, idx) {
									return <li key={article.title} className="list-group-item"><ArticleLink article={article} /></li>;
								})}
							</ul>
						</div>
					</div>
				</div>
			</section>
		);
	}
});

var Main = React.createClass({
	componentWillMount: function() {
		this.mapStyle = {
			height: "100%",
			margin: 0,
			padding: 0
		};
	},

	render: function() {
		var countryLists = [];
		for (var key in articles) {
			if (articles.hasOwnProperty(key)) {
				countryLists.push(
					<CountryList key={key} country={key} articles={articles[key]} />
				);
			}
		}

		return (
			<main style={this.mapStyle}>
				<Header />
				<Map />
				{countryLists}
			</main>
		);
	}
});
